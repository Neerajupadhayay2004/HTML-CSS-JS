<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Global Styles */
        :root {
            --primary: #3498db;
            --secondary: #2980b9;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --gray: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--dark);
            color: white;
            transition: all 0.3s;
            position: relative;
            z-index: 100;
        }
        
        .logo {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
        }
        
        .logo h2 {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .nav-links {
            list-style: none;
            padding: 20px 0;
        }
        
        .nav-links li {
            margin-bottom: 5px;
        }
        
        .nav-links a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .nav-links a i {
            margin-right: 10px;
            font-size: 1.1rem;
        }
        
        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .nav-links .active a {
            background-color: var(--primary);
            color: white;
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .header h1 {
            font-size: 1.8rem;
            color: var(--dark);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        /* Dashboard Cards */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-header h3 {
            font-size: 1rem;
            color: #777;
        }
        
        .card-header i {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .card-body h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .card-footer {
            font-size: 0.9rem;
            color: #777;
        }
        
        /* Tables */
        .recent-bookings, .available-rooms, .guest-list, .staff-list {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-header h2 {
            font-size: 1.3rem;
            color: var(--dark);
        }
        
        .section-header a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f9f9f9;
            font-weight: 600;
            color: #555;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status.confirmed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status.pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status.cancelled {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .status.available {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status.occupied {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .status.maintenance {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalOpen 0.3s ease;
        }
        
        @keyframes modalOpen {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .nav-links {
                display: flex;
                overflow-x: auto;
                padding: 10px 0;
            }
        
            .nav-links li {
                flex: 0 0 auto;
                margin-bottom: 0;
                margin-right: 5px;
            }
            
            .nav-links a {
                padding: 10px 15px;
                white-space: nowrap;
            }
            
            .cards {
                grid-template-columns: 1fr;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
        }
        
        /* Print Styles */
        @media print {
            .sidebar, .header, .section-header a, .btn {
                display: none !important;
            }
            
            .main-content {
                padding: 0;
                margin: 0;
            }
            
            table {
                width: 100%;
                border-collapse: collapse;
            }
            
            th, td {
                border: 1px solid #ddd;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <img src="https://via.placeholder.com/80" alt="Hotel Logo">
                <h2>Hotel Management</h2>
            </div>
            <nav>
                <ul class="nav-links">
                    <li class="active"><a href="#dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#bookings"><i class="fas fa-calendar-check"></i> Bookings</a></li>
                    <li><a href="#rooms"><i class="fas fa-bed"></i> Rooms</a></li>
                    <li><a href="#guests"><i class="fas fa-users"></i> Guests</a></li>
                    <li><a href="#staff"><i class="fas fa-user-tie"></i> Staff</a></li>
                    <li><a href="#reports"><i class="fas fa-chart-bar"></i> Reports</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="tab-content active">
                <div class="header">
                    <h1>Dashboard</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <!-- Dashboard Cards -->
                <div class="cards">
                    <div class="card">
                        <div class="card-header">
                            <h3>Total Rooms</h3>
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="card-body">
                            <h2 id="totalRooms">0</h2>
                        </div>
                        <div class="card-footer">
                            <span id="availableRooms">0 available</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Today's Bookings</h3>
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="card-body">
                            <h2 id="todayBookings">0</h2>
                        </div>
                        <div class="card-footer">
                            <span id="todayCheckIns">0 check-ins</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Current Guests</h3>
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-body">
                            <h2 id="currentGuests">0</h2>
                        </div>
                        <div class="card-footer">
                            <span id="todayCheckOuts">0 check-outs today</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Revenue</h3>
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="card-body">
                            <h2 id="monthlyRevenue">$0</h2>
                        </div>
                        <div class="card-footer">
                            <span>This month</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Bookings Table -->
                <div class="recent-bookings">
                    <div class="section-header">
                        <h2>Recent Bookings</h2>
                        <a href="#" id="newBookingBtn">+ New Booking</a>
                    </div>
                    <table id="bookingsTable">
                        <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>Guest Name</th>
                                <th>Room No</th>
                                <th>Check-In</th>
                                <th>Check-Out</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Bookings will be added here dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Available Rooms Table -->
                <div class="available-rooms">
                    <div class="section-header">
                        <h2>Available Rooms</h2>
                        <a href="#" id="addRoomBtn">+ Add Room</a>
                    </div>
                    <table id="roomsTable">
                        <thead>
                            <tr>
                                <th>Room No</th>
                                <th>Type</th>
                                <th>Price/Night</th>
                                <th>Capacity</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rooms will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Bookings Section -->
            <section id="bookings" class="tab-content">
                <div class="header">
                    <h1>Bookings Management</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <div class="recent-bookings">
                    <div class="section-header">
                        <h2>All Bookings</h2>
                        <a href="#" id="newBookingBtn2">+ New Booking</a>
                    </div>
                    <table id="allBookingsTable">
                        <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>Guest Name</th>
                                <th>Room No</th>
                                <th>Check-In</th>
                                <th>Check-Out</th>
                                <th>Status</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- All bookings will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Rooms Section -->
            <section id="rooms" class="tab-content">
                <div class="header">
                    <h1>Rooms Management</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <div class="available-rooms">
                    <div class="section-header">
                        <h2>All Rooms</h2>
                        <a href="#" id="addRoomBtn2">+ Add Room</a>
                    </div>
                    <table id="allRoomsTable">
                        <thead>
                            <tr>
                                <th>Room No</th>
                                <th>Type</th>
                                <th>Price/Night</th>
                                <th>Capacity</th>
                                <th>Amenities</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- All rooms will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Guests Section -->
            <section id="guests" class="tab-content">
                <div class="header">
                    <h1>Guests Management</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <div class="guest-list">
                    <div class="section-header">
                        <h2>All Guests</h2>
                        <a href="#" id="addGuestBtn">+ Add Guest</a>
                    </div>
                    <table id="guestsTable">
                        <thead>
                            <tr>
                                <th>Guest ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Address</th>
                                <th>Bookings</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Guests will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Staff Section -->
            <section id="staff" class="tab-content">
                <div class="header">
                    <h1>Staff Management</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <div class="staff-list">
                    <div class="section-header">
                        <h2>All Staff Members</h2>
                        <a href="#" id="addStaffBtn">+ Add Staff</a>
                    </div>
                    <table id="staffTable">
                        <thead>
                            <tr>
                                <th>Staff ID</th>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Salary</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Staff will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="tab-content">
                <div class="header">
                    <h1>Reports</h1>
                    <div class="user-info">
                        <img src="https://via.placeholder.com/40" alt="User">
                        <span>Admin User</span>
                    </div>
                </div>

                <div class="cards">
                    <div class="card">
                        <div class="card-header">
                            <h3>Generate Report</h3>
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label for="reportType">Report Type</label>
                                <select id="reportType" class="form-control">
                                    <option value="occupancy">Occupancy Report</option>
                                    <option value="revenue">Revenue Report</option>
                                    <option value="guests">Guest Report</option>
                                    <option value="bookings">Booking Report</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reportPeriod">Period</label>
                                <select id="reportPeriod" class="form-control">
                                    <option value="today">Today</option>
                                    <option value="week">This Week</option>
                                    <option value="month" selected>This Month</option>
                                    <option value="year">This Year</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            <div class="form-group" id="customDateRange" style="display: none;">
                                <label>Date Range</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="date" id="startDate" class="form-control">
                                    <input type="date" id="endDate" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button id="generateReportBtn" class="btn btn-primary">Generate Report</button>
                            <button id="printReportBtn" class="btn btn-success" style="display: none;">Print Report</button>
                        </div>
                    </div>
                </div>

                <div id="reportResults" style="display: none;">
                    <div class="recent-bookings">
                        <div class="section-header">
                            <h2 id="reportTitle">Report Results</h2>
                        </div>
                        <div id="reportContent">
                            <!-- Report content will be displayed here -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- New Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Booking</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bookingForm">
                    <div class="form-group">
                        <label for="bookingGuest">Guest</label>
                        <select id="bookingGuest" class="form-control" required>
                            <option value="">Select Guest</option>
                            <!-- Guests will be added here dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bookingRoom">Room</label>
                        <select id="bookingRoom" class="form-control" required>
                            <option value="">Select Room</option>
                            <!-- Available rooms will be added here dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bookingCheckIn">Check-In Date</label>
                        <input type="date" id="bookingCheckIn" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="bookingCheckOut">Check-Out Date</label>
                        <input type="date" id="bookingCheckOut" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="bookingAdults">Adults</label>
                        <input type="number" id="bookingAdults" class="form-control" min="1" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="bookingChildren">Children</label>
                        <input type="number" id="bookingChildren" class="form-control" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="bookingStatus">Status</label>
                        <select id="bookingStatus" class="form-control" required>
                            <option value="confirmed">Confirmed</option>
                            <option value="pending">Pending</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bookingSpecialRequests">Special Requests</label>
                        <textarea id="bookingSpecialRequests" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">Cancel</button>
                <button class="btn btn-primary" id="submitBooking">Submit Booking</button>
            </div>
        </div>
    </div>

    <!-- Add Room Modal -->
    <div class="modal" id="roomModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Room</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="roomForm">
                    <div class="form-group">
                        <label for="roomNumber">Room Number</label>
                        <input type="text" id="roomNumber" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="roomType">Room Type</label>
                        <select id="roomType" class="form-control" required>
                            <option value="">Select Room Type</option>
                            <option value="standard">Standard</option>
                            <option value="deluxe">Deluxe</option>
                            <option value="suite">Suite</option>
                            <option value="executive">Executive</option>
                            <option value="family">Family</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="roomPrice">Price per Night ($)</label>
                        <input type="number" id="roomPrice" class="form-control" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="roomCapacity">Capacity</label>
                        <input type="number" id="roomCapacity" class="form-control" min="1" value="2" required>
                    </div>
                    <div class="form-group">
                        <label for="roomAmenities">Amenities (comma separated)</label>
                        <input type="text" id="roomAmenities" class="form-control" placeholder="e.g., WiFi, TV, AC, Mini-bar">
                    </div>
                    <div class="form-group">
                        <label for="roomStatus">Status</label>
                        <select id="roomStatus" class="form-control" required>
                            <option value="available">Available</option>
                            <option value="occupied">Occupied</option>
                            <option value="maintenance">Maintenance</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">Cancel</button>
                <button class="btn btn-primary" id="submitRoom">Add Room</button>
            </div>
        </div>
    </div>

    <!-- Add Guest Modal -->
    <div class="modal" id="guestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Guest</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="guestForm">
                    <div class="form-group">
                        <label for="guestFirstName">First Name</label>
                        <input type="text" id="guestFirstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="guestLastName">Last Name</label>
                        <input type="text" id="guestLastName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="guestEmail">Email</label>
                        <input type="email" id="guestEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="guestPhone">Phone</label>
                        <input type="tel" id="guestPhone" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="guestAddress">Address</label>
                        <textarea id="guestAddress" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="guestIdType">ID Type</label>
                        <select id="guestIdType" class="form-control">
                            <option value="passport">Passport</option>
                            <option value="driver_license">Driver License</option>
                            <option value="national_id">National ID</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="guestIdNumber">ID Number</label>
                        <input type="text" id="guestIdNumber" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">Cancel</button>
                <button class="btn btn-primary" id="submitGuest">Add Guest</button>
            </div>
        </div>
    </div>

    <!-- Add Staff Modal -->
    <div class="modal" id="staffModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Staff Member</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="staffForm">
                    <div class="form-group">
                        <label for="staffFirstName">First Name</label>
                        <input type="text" id="staffFirstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="staffLastName">Last Name</label>
                        <input type="text" id="staffLastName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="staffPosition">Position</label>
                        <select id="staffPosition" class="form-control" required>
                            <option value="">Select Position</option>
                            <option value="manager">Manager</option>
                            <option value="receptionist">Receptionist</option>
                            <option value="housekeeping">Housekeeping</option>
                            <option value="chef">Chef</option>
                            <option value="waiter">Waiter</option>
                            <option value="security">Security</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="staffEmail">Email</label>
                        <input type="email" id="staffEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="staffPhone">Phone</label>
                        <input type="tel" id="staffPhone" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="staffSalary">Salary ($)</label>
                        <input type="number" id="staffSalary" class="form-control" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="staffJoinDate">Join Date</label>
                        <input type="date" id="staffJoinDate" class="form-control" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">Cancel</button>
                <button class="btn btn-primary" id="submitStaff">Add Staff</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal (used for all edit operations) -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="editModalTitle">Edit</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="editModalBody">
                <!-- Content will be loaded here dynamically -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">Cancel</button>
                <button class="btn btn-primary" id="saveEdit">Save Changes</button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage (in a real app, this would be replaced with a backend API)
        let hotelData = {
            rooms: [],
            bookings: [],
            guests: [],
            staff: [],
            nextBookingId: 1001,
            nextGuestId: 2001,
            nextStaffId: 3001
        };

        // DOM Elements
        const mainContent = document.querySelector('.main-content');
        const navLinks = document.querySelectorAll('.nav-links li a');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Modal Elements
        const bookingModal = document.getElementById('bookingModal');
        const roomModal = document.getElementById('roomModal');
        const guestModal = document.getElementById('guestModal');
        const staffModal = document.getElementById('staffModal');
        const editModal = document.getElementById('editModal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        
        // Form Elements
        const bookingForm = document.getElementById('bookingForm');
        const roomForm = document.getElementById('roomForm');
        const guestForm = document.getElementById('guestForm');
        const staffForm = document.getElementById('staffForm');
        
        // Buttons
        const newBookingBtns = document.querySelectorAll('[id^="newBookingBtn"]');
        const addRoomBtns = document.querySelectorAll('[id^="addRoomBtn"]');
        const addGuestBtn = document.getElementById('addGuestBtn');
        const addStaffBtn = document.getElementById('addStaffBtn');
        const submitBookingBtn = document.getElementById('submitBooking');
        const submitRoomBtn = document.getElementById('submitRoom');
        const submitGuestBtn = document.getElementById('submitGuest');
        const submitStaffBtn = document.getElementById('submitStaff');
        const saveEditBtn = document.getElementById('saveEdit');
        const generateReportBtn = document.getElementById('generateReportBtn');
        const printReportBtn = document.getElementById('printReportBtn');
        
        // Report Elements
        const reportType = document.getElementById('reportType');
        const reportPeriod = document.getElementById('reportPeriod');
        const customDateRange = document.getElementById('customDateRange');
        const startDate = document.getElementById('startDate');
        const endDate = document.getElementById('endDate');
        const reportResults = document.getElementById('reportResults');
        const reportTitle = document.getElementById('reportTitle');
        const reportContent = document.getElementById('reportContent');
        
        // Current item being edited
        let currentEditItem = null;
        let currentEditType = null;

        // Initialize the application
        function initApp() {
            // Load sample data if localStorage is empty
            if (!localStorage.getItem('hotelData')) {
                loadSampleData();
            } else {
                hotelData = JSON.parse(localStorage.getItem('hotelData'));
            }
            
            // Set today's date as default for date inputs
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingCheckIn').min = today;
            document.getElementById('bookingCheckIn').value = today;
            document.getElementById('bookingCheckOut').min = today;
            
            // Set default join date for staff
            document.getElementById('staffJoinDate').value = today;
            
            // Set default dates for report range
            startDate.value = today;
            endDate.value = today;
            
            // Update the dashboard
            updateDashboard();
            
            // Render all tables
            renderBookingsTable();
            renderAllBookingsTable();
            renderRoomsTable();
            renderAllRoomsTable();
            renderGuestsTable();
            renderStaffTable();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Load sample data
        function loadSampleData() {
            hotelData = {
                rooms: [
                    {
                        number: '101',
                        type: 'Standard',
                        price: 120,
                        capacity: 2,
                        amenities: 'WiFi, TV, AC',
                        status: 'available'
                    },
                    {
                        number: '102',
                        type: 'Standard',
                        price: 120,
                        capacity: 2,
                        amenities: 'WiFi, TV, AC',
                        status: 'available'
                    },
                    {
                        number: '201',
                        type: 'Deluxe',
                        price: 180,
                        capacity: 2,
                        amenities: 'WiFi, TV, AC, Mini-bar',
                        status: 'available'
                    },
                    {
                        number: '202',
                        type: 'Deluxe',
                        price: 180,
                        capacity: 2,
                        amenities: 'WiFi, TV, AC, Mini-bar',
                        status: 'occupied'
                    },
                    {
                        number: '301',
                        type: 'Suite',
                        price: 250,
                        capacity: 4,
                        amenities: 'WiFi, TV, AC, Mini-bar, Jacuzzi',
                        status: 'available'
                    }
                ],
                bookings: [
                    {
                        id: 'BH1001',
                        guestId: 'G2001',
                        roomNumber: '202',
                        checkIn: '2023-06-15',
                        checkOut: '2023-06-20',
                        adults: 2,
                        children: 0,
                        status: 'confirmed',
                        specialRequests: 'None',
                        createdAt: new Date().toISOString()
                    }
                ],
                guests: [
                    {
                        id: 'G2001',
                        firstName: 'John',
                        lastName: 'Smith',
                        email: 'john.smith@example.com',
                        phone: '1234567890',
                        address: '123 Main St, Anytown',
                        idType: 'passport',
                        idNumber: 'AB123456',
                        bookings: ['BH1001']
                    }
                ],
                staff: [
                    {
                        id: 'S3001',
                        firstName: 'Sarah',
                        lastName: 'Johnson',
                        position: 'manager',
                        email: 'sarah.johnson@hotel.com',
                        phone: '9876543210',
                        salary: 5000,
                        joinDate: '2022-01-15'
                    }
                ],
                nextBookingId: 1002,
                nextGuestId: 2002,
                nextStaffId: 3002
            };
            
            saveData();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('hotelData', JSON.stringify(hotelData));
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = link.getAttribute('href').substring(1);
                    
                    // Update active tab
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(target).classList.add('active');
                    
                    // Update active nav link
                    navLinks.forEach(navLink => {
                        navLink.parentElement.classList.remove('active');
                    });
                    link.parentElement.classList.add('active');
                });
            });
            
            // New booking buttons
            newBookingBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openBookingModal();
                });
            });
            
            // Add room buttons
            addRoomBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    roomForm.reset();
                    roomModal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                });
            });
            
            // Add guest button
            addGuestBtn.addEventListener('click', (e) => {
                e.preventDefault();
                guestForm.reset();
                guestModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            // Add staff button
            addStaffBtn.addEventListener('click', (e) => {
                e.preventDefault();
                staffForm.reset();
                staffModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            // Close modal buttons
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', closeAllModals);
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    closeAllModals();
                }
            });
            
            // Form submissions
            submitBookingBtn.addEventListener('click', addBooking);
            submitRoomBtn.addEventListener('click', addRoom);
            submitGuestBtn.addEventListener('click', addGuest);
            submitStaffBtn.addEventListener('click', addStaff);
            saveEditBtn.addEventListener('click', saveEdit);
            
            // Report generation
            generateReportBtn.addEventListener('click', generateReport);
            printReportBtn.addEventListener('click', () => window.print());
            
            // Custom date range toggle
            reportPeriod.addEventListener('change', () => {
                customDateRange.style.display = reportPeriod.value === 'custom' ? 'block' : 'none';
            });
            
            // Check-out date validation
            document.getElementById('bookingCheckIn').addEventListener('change', function() {
                const checkOut = document.getElementById('bookingCheckOut');
                checkOut.min = this.value;
                if (checkOut.value < this.value) {
                    checkOut.value = this.value;
                }
            });
        }

        // Close all modals
        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
            document.body.style.overflow = 'auto';
        }

        // Open booking modal with populated selects
        function openBookingModal() {
            bookingForm.reset();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingCheckIn').value = today;
            document.getElementById('bookingCheckOut').value = today;
            
            // Populate guests select
            const guestSelect = document.getElementById('bookingGuest');
            guestSelect.innerHTML = '<option value="">Select Guest</option>';
            hotelData.guests.forEach(guest => {
                const option = document.createElement('option');
                option.value = guest.id;
                option.textContent = `${guest.firstName} ${guest.lastName}`;
                guestSelect.appendChild(option);
            });
            
            // Populate rooms select (only available rooms)
            const roomSelect = document.getElementById('bookingRoom');
            roomSelect.innerHTML = '<option value="">Select Room</option>';
            hotelData.rooms.forEach(room => {
                if (room.status === 'available') {
                    const option = document.createElement('option');
                    option.value = room.number;
                    option.textContent = `${room.number} - ${room.type} ($${room.price}/night)`;
                    roomSelect.appendChild(option);
                }
            });
            
            bookingModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Add a new booking
        function addBooking() {
            if (!bookingForm.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            const guestId = document.getElementById('bookingGuest').value;
            const roomNumber = document.getElementById('bookingRoom').value;
            const checkIn = document.getElementById('bookingCheckIn').value;
            const checkOut = document.getElementById('bookingCheckOut').value;
            const adults = parseInt(document.getElementById('bookingAdults').value);
            const children = parseInt(document.getElementById('bookingChildren').value) || 0;
            const status = document.getElementById('bookingStatus').value;
            const specialRequests = document.getElementById('bookingSpecialRequests').value;
            
            // Find the room to get price
            const room = hotelData.rooms.find(r => r.number === roomNumber);
            if (!room) {
                alert('Selected room not found');
                return;
            }
            
            // Calculate total nights
            const checkInDate = new Date(checkIn);
            const checkOutDate = new Date(checkOut);
            const nights = Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24));
            
            // Create new booking
            const booking = {
                id: `BH${hotelData.nextBookingId++}`,
                guestId,
                roomNumber,
                checkIn,
                checkOut,
                adults,
                children,
                status,
                specialRequests,
                roomPrice: room.price,
                total: room.price * nights,
                createdAt: new Date().toISOString()
            };
            
            // Add to bookings array
            hotelData.bookings.push(booking);
            
            // Update room status if booking is confirmed
            if (status === 'confirmed') {
                const roomIndex = hotelData.rooms.findIndex(r => r.number === roomNumber);
                if (roomIndex !== -1) {
                    hotelData.rooms[roomIndex].status = 'occupied';
                }
            }
            
            // Add booking to guest's record
            const guestIndex = hotelData.guests.findIndex(g => g.id === guestId);
            if (guestIndex !== -1) {
                if (!hotelData.guests[guestIndex].bookings) {
                    hotelData.guests[guestIndex].bookings = [];
                }
                hotelData.guests[guestIndex].bookings.push(booking.id);
            }
            
            // Save data and update UI
            saveData();
            updateDashboard();
            renderBookingsTable();
            renderAllBookingsTable();
            renderRoomsTable();
            renderAllRoomsTable();
            
            // Close modal
            closeAllModals();
            
            alert(`Booking ${booking.id} created successfully!`);
        }

        // Add a new room
        function addRoom() {
            if (!roomForm.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Check if room number already exists
            const roomNumber = document.getElementById('roomNumber').value;
            if (hotelData.rooms.some(r => r.number === roomNumber)) {
                alert('Room number already exists');
                return;
            }
            
            const room = {
                number: roomNumber,
                type: document.getElementById('roomType').value,
                price: parseFloat(document.getElementById('roomPrice').value),
                capacity: parseInt(document.getElementById('roomCapacity').value),
                amenities: document.getElementById('roomAmenities').value,
                status: document.getElementById('roomStatus').value
            };
            
            hotelData.rooms.push(room);
            saveData();
            updateDashboard();
            renderRoomsTable();
            renderAllRoomsTable();
            closeAllModals();
            
            alert(`Room ${room.number} added successfully!`);
        }

        // Add a new guest
        function addGuest() {
            if (!guestForm.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            const guest = {
                id: `G${hotelData.nextGuestId++}`,
                firstName: document.getElementById('guestFirstName').value,
                lastName: document.getElementById('guestLastName').value,
                email: document.getElementById('guestEmail').value,
                phone: document.getElementById('guestPhone').value,
                address: document.getElementById('guestAddress').value,
                idType: document.getElementById('guestIdType').value,
                idNumber: document.getElementById('guestIdNumber').value,
                bookings: []
            };
            
            hotelData.guests.push(guest);
            saveData();
            renderGuestsTable();
            closeAllModals();
            
            alert(`Guest ${guest.firstName} ${guest.lastName} added successfully!`);
        }

        // Add a new staff member
        function addStaff() {
            if (!staffForm.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            const staff = {
                id: `S${hotelData.nextStaffId++}`,
                firstName: document.getElementById('staffFirstName').value,
                lastName: document.getElementById('staffLastName').value,
                position: document.getElementById('staffPosition').value,
                email: document.getElementById('staffEmail').value,
                phone: document.getElementById('staffPhone').value,
                salary: parseFloat(document.getElementById('staffSalary').value),
                joinDate: document.getElementById('staffJoinDate').value
            };
            
            hotelData.staff.push(staff);
            saveData();
            renderStaffTable();
            closeAllModals();
            
            alert(`Staff member ${staff.firstName} ${staff.lastName} added successfully!`);
        }

        // Open edit modal for an item
        function openEditModal(type, id) {
            currentEditType = type;
            
            // Set modal title
            document.getElementById('editModalTitle').textContent = `Edit ${type}`;
            
            // Clear modal body
            const modalBody = document.getElementById('editModalBody');
            modalBody.innerHTML = '';
            
            // Create form based on type
            let formHTML = '';
            let item = null;
            
            switch (type) {
                case 'booking':
                    item = hotelData.bookings.find(b => b.id === id);
                    if (!item) return;
                    
                    formHTML = `
                        <form id="editForm">
                            <div class="form-group">
                                <label>Booking ID</label>
                                <input type="text" class="form-control" value="${item.id}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="editStatus">Status</label>
                                <select id="editStatus" class="form-control" required>
                                    <option value="confirmed" ${item.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                                    <option value="pending" ${item.status === 'pending' ? 'selected' : ''}>Pending</option>
                                    <option value="cancelled" ${item.status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editSpecialRequests">Special Requests</label>
                                <textarea id="editSpecialRequests" class="form-control" rows="3">${item.specialRequests || ''}</textarea>
                            </div>
                            <input type="hidden" id="editRoomNumber" value="${item.roomNumber}">
                        </form>
                    `;
                    break;
                    
                case 'room':
                    item = hotelData.rooms.find(r => r.number === id);
                    if (!item) return;
                    
                    formHTML = `
                        <form id="editForm">
                            <div class="form-group">
                                <label>Room Number</label>
                                <input type="text" class="form-control" value="${item.number}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="editRoomType">Room Type</label>
                                <select id="editRoomType" class="form-control" required>
                                    <option value="standard" ${item.type === 'standard' ? 'selected' : ''}>Standard</option>
                                    <option value="deluxe" ${item.type === 'deluxe' ? 'selected' : ''}>Deluxe</option>
                                    <option value="suite" ${item.type === 'suite' ? 'selected' : ''}>Suite</option>
                                    <option value="executive" ${item.type === 'executive' ? 'selected' : ''}>Executive</option>
                                    <option value="family" ${item.type === 'family' ? 'selected' : ''}>Family</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editRoomPrice">Price per Night ($)</label>
                                <input type="number" id="editRoomPrice" class="form-control" min="0" step="0.01" value="${item.price}" required>
                            </div>
                            <div class="form-group">
                                <label for="editRoomStatus">Status</label>
                                <select id="editRoomStatus" class="form-control" required>
                                    <option value="available" ${item.status === 'available' ? 'selected' : ''}>Available</option>
                                    <option value="occupied" ${item.status === 'occupied' ? 'selected' : ''}>Occupied</option>
                                    <option value="maintenance" ${item.status === 'maintenance' ? 'selected' : ''}>Maintenance</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editRoomAmenities">Amenities</label>
                                <input type="text" id="editRoomAmenities" class="form-control" value="${item.amenities || ''}">
                            </div>
                        </form>
                    `;
                    break;
                    
                case 'guest':
                    item = hotelData.guests.find(g => g.id === id);
                    if (!item) return;
                    
                    formHTML = `
                        <form id="editForm">
                            <div class="form-group">
                                <label>Guest ID</label>
                                <input type="text" class="form-control" value="${item.id}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="editGuestFirstName">First Name</label>
                                <input type="text" id="editGuestFirstName" class="form-control" value="${item.firstName}" required>
                            </div>
                            <div class="form-group">
                                <label for="editGuestLastName">Last Name</label>
                                <input type="text" id="editGuestLastName" class="form-control" value="${item.lastName}" required>
                            </div>
                            <div class="form-group">
                                <label for="editGuestEmail">Email</label>
                                <input type="email" id="editGuestEmail" class="form-control" value="${item.email}" required>
                            </div>
                            <div class="form-group">
                                <label for="editGuestPhone">Phone</label>
                                <input type="tel" id="editGuestPhone" class="form-control" value="${item.phone}" required>
                            </div>
                        </form>
                    `;
                    break;
                    
                case 'staff':
                    item = hotelData.staff.find(s => s.id === id);
                    if (!item) return;
                    
                    formHTML = `
                        <form id="editForm">
                            <div class="form-group">
                                <label>Staff ID</label>
                                <input type="text" class="form-control" value="${item.id}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="editStaffFirstName">First Name</label>
                                <input type="text" id="editStaffFirstName" class="form-control" value="${item.firstName}" required>
                            </div>
                            <div class="form-group">
                                <label for="editStaffLastName">Last Name</label>
                                <input type="text" id="editStaffLastName" class="form-control" value="${item.lastName}" required>
                            </div>
                            <div class="form-group">
                                <label for="editStaffPosition">Position</label>
                                <select id="editStaffPosition" class="form-control" required>
                                    <option value="manager" ${item.position === 'manager' ? 'selected' : ''}>Manager</option>
                                    <option value="receptionist" ${item.position === 'receptionist' ? 'selected' : ''}>Receptionist</option>
                                    <option value="housekeeping" ${item.position === 'housekeeping' ? 'selected' : ''}>Housekeeping</option>
                                    <option value="chef" ${item.position === 'chef' ? 'selected' : ''}>Chef</option>
                                    <option value="waiter" ${item.position === 'waiter' ? 'selected' : ''}>Waiter</option>
                                    <option value="security" ${item.position === 'security' ? 'selected' : ''}>Security</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editStaffSalary">Salary ($)</label>
                                <input type="number" id="editStaffSalary" class="form-control" min="0" step="0.01" value="${item.salary}" required>
                            </div>
                        </form>
                    `;
                    break;
            }
            
            modalBody.innerHTML = formHTML;
            currentEditItem = item;
            editModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Save edited item
        function saveEdit() {
            let updatedItem;
            
            switch (currentEditType) {
                case 'booking':
                    const status = document.getElementById('editStatus').value;
                    const specialRequests = document.getElementById('editSpecialRequests').value;
                    const roomNumber = document.getElementById('editRoomNumber').value;
                    
                    // Find and update booking
                    const bookingIndex = hotelData.bookings.findIndex(b => b.id === currentEditItem.id);
                    if (bookingIndex !== -1) {
                        hotelData.bookings[bookingIndex].status = status;
                        hotelData.bookings[bookingIndex].specialRequests = specialRequests;
                        
                        // Update room status if needed
                        if (status === 'confirmed' && currentEditItem.status !== 'confirmed') {
                            const roomIndex = hotelData.rooms.findIndex(r => r.number === roomNumber);
                            if (roomIndex !== -1) {
                                hotelData.rooms[roomIndex].status = 'occupied';
                            }
                        } else if (status !== 'confirmed' && currentEditItem.status === 'confirmed') {
                            const roomIndex = hotelData.rooms.findIndex(r => r.number === roomNumber);
                            if (roomIndex !== -1) {
                                hotelData.rooms[roomIndex].status = 'available';
                            }
                        }
                    }
                    break;
                    
                case 'room':
                    const type = document.getElementById('editRoomType').value;
                    const price = parseFloat(document.getElementById('editRoomPrice').value);
                    const statusRoom = document.getElementById('editRoomStatus').value;
                    const amenities = document.getElementById('editRoomAmenities').value;
                    
                    // Find and update room
                    const roomIndex = hotelData.rooms.findIndex(r => r.number === currentEditItem.number);
                    if (roomIndex !== -1) {
                        hotelData.rooms[roomIndex].type = type;
                        hotelData.rooms[roomIndex].price = price;
                        hotelData.rooms[roomIndex].status = statusRoom;
                        hotelData.rooms[roomIndex].amenities = amenities;
                    }
                    break;
                    
                case 'guest':
                    const firstName = document.getElementById('editGuestFirstName').value;
                    const lastName = document.getElementById('editGuestLastName').value;
                    const email = document.getElementById('editGuestEmail').value;
                    const phone = document.getElementById('editGuestPhone').value;
                    
                    // Find and update guest
                    const guestIndex = hotelData.guests.findIndex(g => g.id === currentEditItem.id);
                    if (guestIndex !== -1) {
                        hotelData.guests[guestIndex].firstName = firstName;
                        hotelData.guests[guestIndex].lastName = lastName;
                        hotelData.guests[guestIndex].email = email;
                        hotelData.guests[guestIndex].phone = phone;
                    }
                    break;
                    
                case 'staff':
                    const staffFirstName = document.getElementById('editStaffFirstName').value;
                    const staffLastName = document.getElementById('editStaffLastName').value;
                    const position = document.getElementById('editStaffPosition').value;
                    const salary = parseFloat(document.getElementById('editStaffSalary').value);
                    
                    // Find and update staff
                    const staffIndex = hotelData.staff.findIndex(s => s.id === currentEditItem.id);
                    if (staffIndex !== -1) {
                        hotelData.staff[staffIndex].firstName = staffFirstName;
                        hotelData.staff[staffIndex].lastName = staffLastName;
                        hotelData.staff[staffIndex].position = position;
                        hotelData.staff[staffIndex].salary = salary;
                    }
                    break;
            }
            
            saveData();
            updateDashboard();
            
            // Update relevant tables
            if (currentEditType === 'booking') {
                renderBookingsTable();
                renderAllBookingsTable();
                renderRoomsTable();
            } else if (currentEditType === 'room') {
                renderRoomsTable();
                renderAllRoomsTable();
            } else if (currentEditType === 'guest') {
                renderGuestsTable();
            } else if (currentEditType === 'staff') {
                renderStaffTable();
            }
            
            closeAllModals();
            alert(`${currentEditType} updated successfully!`);
        }

        // Delete an item
        function deleteItem(type, id) {
            if (!confirm(`Are you sure you want to delete this ${type}?`)) return;
            
            switch (type) {
                case 'booking':
                    // Find booking to get room number
                    const booking = hotelData.bookings.find(b => b.id === id);
                    if (booking) {
                        // Update room status if booking was confirmed
                        if (booking.status === 'confirmed') {
                            const roomIndex = hotelData.rooms.findIndex(r => r.number === booking.roomNumber);
                            if (roomIndex !== -1) {
                                hotelData.rooms[roomIndex].status = 'available';
                            }
                        }
                        
                        // Remove booking from guest's record
                        const guestIndex = hotelData.guests.findIndex(g => g.id === booking.guestId);
                        if (guestIndex !== -1) {
                            hotelData.guests[guestIndex].bookings = hotelData.guests[guestIndex].bookings.filter(b => b !== id);
                        }
                    }
                    
                    // Remove booking
                    hotelData.bookings = hotelData.bookings.filter(b => b.id !== id);
                    break;
                    
                case 'room':
                    // Check if room has any bookings
                    const hasBookings = hotelData.bookings.some(b => b.roomNumber === id);
                    if (hasBookings) {
                        alert('Cannot delete room with existing bookings');
                        return;
                    }
                    hotelData.rooms = hotelData.rooms.filter(r => r.number !== id);
                    break;
                    
                case 'guest':
                    // Check if guest has any bookings
                    const guest = hotelData.guests.find(g => g.id === id);
                    if (guest && guest.bookings && guest.bookings.length > 0) {
                        alert('Cannot delete guest with existing bookings');
                        return;
                    }
                    hotelData.guests = hotelData.guests.filter(g => g.id !== id);
                    break;
                    
                case 'staff':
                    hotelData.staff = hotelData.staff.filter(s => s.id !== id);
                    break;
            }
            
            saveData();
            updateDashboard();
            
            // Update relevant tables
            if (type === 'booking') {
                renderBookingsTable();
                renderAllBookingsTable();
                renderRoomsTable();
            } else if (type === 'room') {
                renderRoomsTable();
                renderAllRoomsTable();
            } else if (type === 'guest') {
                renderGuestsTable();
            } else if (type === 'staff') {
                renderStaffTable();
            }
            
            alert(`${type} deleted successfully!`);
        }

        // Update dashboard metrics
        function updateDashboard() {
            // Total rooms
            document.getElementById('totalRooms').textContent = hotelData.rooms.length;
            
            // Available rooms
            const availableRooms = hotelData.rooms.filter(r => r.status === 'available').length;
            document.getElementById('availableRooms').textContent = `${availableRooms} available`;
            
            // Today's bookings
            const today = new Date().toISOString().split('T')[0];
            const todaysBookings = hotelData.bookings.filter(b => b.checkIn === today).length;
            document.getElementById('todayBookings').textContent = todaysBookings;
            
            // Today's check-ins (bookings with check-in today)
            document.getElementById('todayCheckIns').textContent = `${todaysBookings} check-ins`;
            
            // Current guests (bookings with check-in <= today and check-out >= today)
            const currentGuests = hotelData.bookings.filter(b => {
                return b.checkIn <= today && b.checkOut >= today && b.status === 'confirmed';
            }).length;
            document.getElementById('currentGuests').textContent = currentGuests;
            
            // Today's check-outs
            const todaysCheckOuts = hotelData.bookings.filter(b => b.checkOut === today && b.status === 'confirmed').length;
            document.getElementById('todayCheckOuts').textContent = `${todaysCheckOuts} check-outs today`;
            
            // Monthly revenue (sum of all confirmed bookings this month)
            const currentMonth = new Date().getMonth() + 1;
            const currentYear = new Date().getFullYear();
            const monthlyRevenue = hotelData.bookings
                .filter(b => {
                    const bookingDate = new Date(b.createdAt);
                    return bookingDate.getMonth() + 1 === currentMonth && 
                           bookingDate.getFullYear() === currentYear && 
                           b.status === 'confirmed';
                })
                .reduce((sum, booking) => sum + booking.total, 0);
            
            document.getElementById('monthlyRevenue').textContent = `$${monthlyRevenue.toLocaleString()}`;
        }

        // Render bookings table (dashboard)
        function renderBookingsTable() {
            const tbody = document.querySelector('#bookingsTable tbody');
            tbody.innerHTML = '';
            
            // Get recent bookings (last 5)
            const recentBookings = [...hotelData.bookings]
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            recentBookings.forEach(booking => {
                const guest = hotelData.guests.find(g => g.id === booking.guestId);
                const guestName = guest ? `${guest.firstName} ${guest.lastName}` : 'Unknown';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${booking.id}</td>
                    <td>${guestName}</td>
                    <td>${booking.roomNumber}</td>
                    <td>${booking.checkIn}</td>
                    <td>${booking.checkOut}</td>
                    <td><span class="status ${booking.status}">${booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}</span></td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditModal('booking', '${booking.id}')">View</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render all bookings table
        function renderAllBookingsTable() {
            const tbody = document.querySelector('#allBookingsTable tbody');
            tbody.innerHTML = '';
            
            hotelData.bookings.forEach(booking => {
                const guest = hotelData.guests.find(g => g.id === booking.guestId);
                const guestName = guest ? `${guest.firstName} ${guest.lastName}` : 'Unknown';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${booking.id}</td>
                    <td>${guestName}</td>
                    <td>${booking.roomNumber}</td>
                    <td>${booking.checkIn}</td>
                    <td>${booking.checkOut}</td>
                    <td><span class="status ${booking.status}">${booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}</span></td>
                    <td>$${booking.total}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditModal('booking', '${booking.id}')">Edit</button>
                        <button class="btn btn-danger" onclick="deleteItem('booking', '${booking.id}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render rooms table (dashboard)
        function renderRoomsTable() {
            const tbody = document.querySelector('#roomsTable tbody');
            tbody.innerHTML = '';
            
            // Get available rooms
            const availableRooms = hotelData.rooms.filter(r => r.status === 'available').slice(0, 5);
            
            availableRooms.forEach(room => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${room.number}</td>
                    <td>${room.type}</td>
                    <td>$${room.price}</td>
                    <td>${room.capacity}</td>
                    <td><span class="status ${room.status}">${room.status.charAt(0).toUpperCase() + room.status.slice(1)}</span></td>
                    <td>
                        <button class="btn btn-primary" onclick="openBookingModalWithRoom('${room.number}')">Book</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Open booking modal with room pre-selected
        function openBookingModalWithRoom(roomNumber) {
            openBookingModal();
            document.getElementById('bookingRoom').value = roomNumber;
        }

        // Render all rooms table
        function renderAllRoomsTable() {
            const tbody = document.querySelector('#allRoomsTable tbody');
            tbody.innerHTML = '';
            
            hotelData.rooms.forEach(room => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${room.number}</td>
                    <td>${room.type}</td>
                    <td>$${room.price}</td>
                    <td>${room.capacity}</td>
                    <td>${room.amenities || '-'}</td>
                    <td><span class="status ${room.status}">${room.status.charAt(0).toUpperCase() + room.status.slice(1)}</span></td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditModal('room', '${room.number}')">Edit</button>
                        <button class="btn btn-danger" onclick="deleteItem('room', '${room.number}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render guests table
        function renderGuestsTable() {
            const tbody = document.querySelector('#guestsTable tbody');
            tbody.innerHTML = '';
            
            hotelData.guests.forEach(guest => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${guest.id}</td>
                    <td>${guest.firstName} ${guest.lastName}</td>
                    <td>${guest.email}</td>
                    <td>${guest.phone}</td>
                    <td>${guest.address || '-'}</td>
                    <td>${guest.bookings ? guest.bookings.length : 0}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditModal('guest', '${guest.id}')">Edit</button>
                        <button class="btn btn-danger" onclick="deleteItem('guest', '${guest.id}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render staff table
        function renderStaffTable() {
            const tbody = document.querySelector('#staffTable tbody');
            tbody.innerHTML = '';
            
            hotelData.staff.forEach(staff => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${staff.id}</td>
                    <td>${staff.firstName} ${staff.lastName}</td>
                    <td>${staff.position.charAt(0).toUpperCase() + staff.position.slice(1)}</td>
                    <td>${staff.email}</td>
                    <td>${staff.phone}</td>
                    <td>$${staff.salary}</td>
                    <td>
                        <button class="btn btn-primary" onclick="openEditModal('staff', '${staff.id}')">Edit</button>
                        <button class="btn btn-danger" onclick="deleteItem('staff', '${staff.id}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Generate report
        function generateReport() {
            const type = reportType.value;
            const period = reportPeriod.value;
            
            let start, end;
            const today = new Date();
            
            if (period === 'custom') {
                start = new Date(startDate.value);
                end = new Date(endDate.value);
            } else {
                start = new Date(today);
                end = new Date(today);
                
                switch (period) {
                    case 'today':
                        // Already set to today
                        break;
                    case 'week':
                        start.setDate(today.getDate() - today.getDay()); // Start of week (Sunday)
                        end.setDate(today.getDate() + (6 - today.getDay())); // End of week (Saturday)
                        break;
                    case 'month':
                        start.setDate(1); // First day of month
                        end = new Date(today.getFullYear(), today.getMonth() + 1, 0); // Last day of month
                        break;
                    case 'year':
                        start = new Date(today.getFullYear(), 0, 1); // First day of year
                        end = new Date(today.getFullYear(), 11, 31); // Last day of year
                        break;
                }
            }
            
            let reportData;
            let title = '';
            
            switch (type) {
                case 'occupancy':
                    // Calculate occupancy rate by day
                    const occupancyByDay = [];
                    const date = new Date(start);
                    
                    while (date <= end) {
                        const dateStr = date.toISOString().split('T')[0];
                        const totalRooms = hotelData.rooms.length;
                        const occupiedRooms = hotelData.bookings.filter(b => 
                            b.checkIn <= dateStr && b.checkOut >= dateStr && b.status === 'confirmed'
                        ).length;
                        
                        const occupancyRate = totalRooms > 0 ? (occupiedRooms / totalRooms * 100).toFixed(2) : 0;
                        
                        occupancyByDay.push({
                            date: dateStr,
                            occupied: occupiedRooms,
                            total: totalRooms,
                            rate: occupancyRate
                        });
                        
                        date.setDate(date.getDate() + 1);
                    }
                    
                    reportData = occupancyByDay;
                    title = `Occupancy Report (${start.toISOString().split('T')[0]} to ${end.toISOString().split('T')[0]})`;
                    break;
                    
                case 'revenue':
                    // Filter confirmed bookings in date range
                    const revenueBookings = hotelData.bookings.filter(b => {
                        const bookingDate = new Date(b.createdAt);
                        return bookingDate >= start && 
                               bookingDate <= end && 
                               b.status === 'confirmed';
                    });
                    
                    // Group by room type
                    const revenueByRoomType = {};
                    let totalRevenue = 0;
                    
                    revenueBookings.forEach(booking => {
                        const room = hotelData.rooms.find(r => r.number === booking.roomNumber);
                        const roomType = room ? room.type : 'Unknown';
                        
                        if (!revenueByRoomType[roomType]) {
                            revenueByRoomType[roomType] = 0;
                        }
                        
                        revenueByRoomType[roomType] += booking.total;
                        totalRevenue += booking.total;
                    });
                    
                    reportData = {
                        byRoomType: revenueByRoomType,
                        total: totalRevenue
                    };
                    title = `Revenue Report (${start.toISOString().split('T')[0]} to ${end.toISOString().split('T')[0]})`;
                    break;
                    
                case 'guests':
                    // Get all guests with bookings in date range
                    const guestIds = new Set();
                    
                    hotelData.bookings.forEach(booking => {
                        const bookingDate = new Date(booking.createdAt);
                        if (bookingDate >= start && bookingDate <= end) {
                            guestIds.add(booking.guestId);
                        }
                    });
                    
                    const guestsInPeriod = hotelData.guests.filter(g => guestIds.has(g.id));
                    
                    // Group by country (would need address/country data)
                    reportData = guestsInPeriod;
                    title = `Guest Report (${start.toISOString().split('T')[0]} to ${end.toISOString().split('T')[0]})`;
                    break;
                    
                case 'bookings':
                    // Get all bookings in date range
                    const bookingsInPeriod = hotelData.bookings.filter(b => {
                        const bookingDate = new Date(b.createdAt);
                        return bookingDate >= start && bookingDate <= end;
                    });
                    
                    // Group by status
                    const bookingsByStatus = {
                        confirmed: 0,
                        pending: 0,
                        cancelled: 0
                    };
                    
                    bookingsInPeriod.forEach(booking => {
                        bookingsByStatus[booking.status]++;
                    });
                    
                    reportData = {
                        bookings: bookingsInPeriod,
                        byStatus: bookingsByStatus
                    };
                    title = `Booking Report (${start.toISOString().split('T')[0]} to ${end.toISOString().split('T')[0]})`;
                    break;
            }
            
            // Display report
            reportTitle.textContent = title;
            reportContent.innerHTML = renderReportContent(type, reportData);
            reportResults.style.display = 'block';
            printReportBtn.style.display = 'block';
        }

        // Render report content based on type
        function renderReportContent(type, data) {
            let html = '';
            
            switch (type) {
                case 'occupancy':
                    html = `
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Occupied Rooms</th>
                                    <th>Total Rooms</th>
                                    <th>Occupancy Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.map(day => `
                                    <tr>
                                        <td>${day.date}</td>
                                        <td>${day.occupied}</td>
                                        <td>${day.total}</td>
                                        <td>${day.rate}%</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        <div class="report-summary">
                            <h3>Average Occupancy: ${(data.reduce((sum, day) => sum + parseFloat(day.rate), 0) / data.length).toFixed(2)}%</h3>
                        </div>
                    `;
                    break;
                    
                case 'revenue':
                    html = `
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Room Type</th>
                                    <th>Revenue</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${Object.entries(data.byRoomType).map(([type, revenue]) => `
                                    <tr>
                                        <td>${type.charAt(0).toUpperCase() + type.slice(1)}</td>
                                        <td>$${revenue.toLocaleString()}</td>
                                    </tr>
                                `).join('')}
                                <tr>
                                    <td><strong>Total Revenue</strong></td>
                                    <td><strong>$${data.total.toLocaleString()}</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    `;
                    break;
                    
                case 'guests':
                    html = `
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Guest ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Bookings</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.map(guest => `
                                    <tr>
                                        <td>${guest.id}</td>
                                        <td>${guest.firstName} ${guest.lastName}</td>
                                        <td>${guest.email}</td>
                                        <td>${guest.phone}</td>
                                        <td>${guest.bookings ? guest.bookings.length : 0}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        <div class="report-summary">
                            <h3>Total Guests: ${data.length}</h3>
                        </div>
                    `;
                    break;
                    
                case 'bookings':
                    html = `
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Booking ID</th>
                                    <th>Guest</th>
                                    <th>Room</th>
                                    <th>Check-In</th>
                                    <th>Check-Out</th>
                                    <th>Status</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.bookings.map(booking => {
                                    const guest = hotelData.guests.find(g => g.id === booking.guestId);
                                    const guestName = guest ? `${guest.firstName} ${guest.lastName}` : 'Unknown';
                                    
                                    return `
                                        <tr>
                                            <td>${booking.id}</td>
                                            <td>${guestName}</td>
                                            <td>${booking.roomNumber}</td>
                                            <td>${booking.checkIn}</td>
                                            <td>${booking.checkOut}</td>
                                            <td><span class="status ${booking.status}">${booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}</span></td>
                                            <td>$${booking.total}</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                        <div class="report-summary">
                            <h3>Booking Summary:</h3>
                            <p>Confirmed: ${data.byStatus.confirmed}</p>
                            <p>Pending: ${data.byStatus.pending}</p>
                            <p>Cancelled: ${data.byStatus.cancelled}</p>
                            <p>Total: ${data.bookings.length}</p>
                        </div>
                    `;
                    break;
            }
            
            return html;
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
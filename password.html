<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuantumPass - Advanced AI Password Strength Analyzer</title>
    <style>
        :root {
            --weak: #ff4757;
            --fair: #ffa502;
            --good: #1e90ff;
            --strong: #2ed573;
            --excellent: #7bed9f;
            --text-dark: #2f3542;
            --text-medium: #57606f;
            --text-light: #a4b0be;
            --bg-light: #f8f9fa;
            --border: #dfe4ea;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --primary: #3742fa;
            --secondary: #5352ed;
            --dark-bg: #1e272e;
            --card-bg: #ffffff;
            --success: #20bf6b;
            --warning: #fa8231;
            --danger: #eb3b5a;
            --info: #2d98da;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--text-medium);
            line-height: 1.6;
        }
        
        .container {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 40px;
            width: 100%;
            max-width: 650px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        h1 {
            color: var(--text-dark);
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
            font-size: 32px;
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        .password-container {
            position: relative;
            margin-bottom: 25px;
        }
        
        input[type="password"], input[type="text"] {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 18px;
            transition: all 0.3s;
            box-sizing: border-box;
            font-family: 'Fira Code', 'Courier New', monospace;
            letter-spacing: 1px;
            background-color: #f8f9fa;
            color: var(--text-dark);
        }
        
        input[type="password"]:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(55, 66, 250, 0.2);
            background-color: white;
        }
        
        .toggle-password {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--text-light);
            background: none;
            border: none;
            font-size: 20px;
            transition: all 0.2s;
        }
        
        .toggle-password:hover {
            color: var(--primary);
        }
        
        .strength-meter {
            height: 12px;
            background-color: #f1f2f6;
            border-radius: 6px;
            margin-bottom: 25px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .strength-bar {
            height: 100%;
            width: 0;
            transition: width 0.5s ease, background-color 0.5s ease;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }
        
        .strength-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            animation: shimmer 2s infinite linear;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .strength-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .strength-text {
            font-weight: 700;
            font-size: 20px;
            display: flex;
            align-items: center;
        }
        
        .strength-icon {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .entropy-score {
            background-color: #f1f2f6;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .requirements {
            margin-bottom: 25px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .requirement {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: var(--text-light);
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .requirement.fulfilled {
            color: var(--success);
        }
        
        .requirement-icon {
            margin-right: 12px;
            font-size: 18px;
            min-width: 18px;
            transition: all 0.3s;
        }
        
        .ai-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e8ecf1 100%);
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
        }
        
        .ai-section h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--text-dark);
            font-size: 18px;
            display: flex;
            align-items: center;
            font-weight: 600;
        }
        
        .ai-icon {
            margin-right: 10px;
            color: var(--primary);
            font-size: 22px;
        }
        
        .ai-section ul {
            padding-left: 0;
            margin-bottom: 0;
            list-style-type: none;
        }
        
        .ai-section li {
            margin-bottom: 12px;
            color: var(--text-medium);
            font-size: 15px;
            position: relative;
            padding-left: 28px;
            line-height: 1.5;
        }
        
        .ai-section li::before {
            content: 'â€¢';
            position: absolute;
            left: 10px;
            color: var(--primary);
            font-size: 20px;
            line-height: 1;
        }
        
        .hidden {
            display: none;
        }
        
        .time-to-crack {
            font-style: italic;
            text-align: center;
            color: var(--text-medium);
            margin: 20px 0;
            font-size: 16px;
            font-weight: 500;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid var(--info);
        }
        
        .password-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 14px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            flex: 1;
            min-width: 160px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #4b54fa;
        }
        
        .btn-secondary {
            background-color: #f1f2f6;
            color: var(--text-dark);
        }
        
        .btn-secondary:hover {
            background-color: #e0e3e9;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #fa8f44;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #26c976;
        }
        
        .btn-icon {
            margin-right: 8px;
            font-size: 16px;
        }
        
        .password-history {
            margin-top: 30px;
            border-top: 1px solid var(--border);
            padding-top: 20px;
        }
        
        .history-title {
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            color: var(--text-dark);
            font-size: 18px;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .history-item:hover {
            background-color: #f8f9fa;
        }
        
        .history-password {
            font-family: 'Fira Code', 'Courier New', monospace;
            letter-spacing: 1px;
            font-size: 15px;
        }
        
        .history-strength {
            font-weight: 600;
            font-size: 13px;
            padding: 4px 12px;
            border-radius: 12px;
            background-color: #f1f2f6;
        }
        
        .strength-weak {
            background-color: rgba(255, 71, 87, 0.1);
            color: var(--weak);
        }
        
        .strength-fair {
            background-color: rgba(255, 165, 2, 0.1);
            color: var(--fair);
        }
        
        .strength-good {
            background-color: rgba(30, 144, 255, 0.1);
            color: var(--good);
        }
        
        .strength-strong {
            background-color: rgba(46, 213, 115, 0.1);
            color: var(--strong);
        }
        
        .auto-correct {
            margin-top: 20px;
            padding: 16px;
            background: linear-gradient(135deg, #f0f8ff 0%, #e0f0ff 100%);
            border-radius: 8px;
            border: 1px dashed var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .corrected-password {
            font-family: 'Fira Code', 'Courier New', monospace;
            font-weight: bold;
            color: var(--text-dark);
            font-size: 16px;
            letter-spacing: 1px;
        }
        
        .apply-correction {
            background: none;
            border: none;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s;
        }
        
        .apply-correction:hover {
            background-color: rgba(55, 66, 250, 0.1);
        }
        
        .password-complexity {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            font-size: 14px;
            align-items: center;
        }
        
        .complexity-bar {
            height: 8px;
            background-color: #f1f2f6;
            border-radius: 4px;
            flex-grow: 1;
            margin: 0 15px;
            align-self: center;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .complexity-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .password-score {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .score-item {
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            background-color: #f8f9fa;
            flex: 1;
            margin: 0 5px;
            transition: all 0.3s;
        }
        
        .score-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .score-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .score-label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-bg);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 13px;
            font-weight: normal;
            line-height: 1.4;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .password-stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .stat-item {
            text-align: center;
            padding: 8px;
            flex: 1;
        }
        
        .stat-value {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 3px;
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 12px;
        }
        
        .tab-container {
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
            padding: 20px 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .password-breakdown {
            margin-top: 20px;
        }
        
        .breakdown-item {
            margin-bottom: 15px;
        }
        
        .breakdown-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .breakdown-bar {
            height: 6px;
            background-color: #f1f2f6;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .breakdown-fill {
            height: 100%;
            border-radius: 3px;
        }
        
        .password-categories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .category-item {
            padding: 10px;
            border-radius: 6px;
            background-color: #f8f9fa;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .category-item:hover {
            background-color: #e8ecf1;
        }
        
        .category-item.active {
            background-color: var(--primary);
            color: white;
        }
        
        .copy-btn {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s;
        }
        
        .copy-btn:hover {
            color: var(--primary);
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--dark-bg);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }
            
            .requirements {
                grid-template-columns: 1fr;
            }
            
            .password-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .password-score {
                flex-direction: column;
                gap: 10px;
            }
            
            .score-item {
                margin: 5px 0;
            }
            
            h1 {
                font-size: 28px;
            }
            
            input[type="password"], input[type="text"] {
                font-size: 16px;
                padding: 15px;
            }
        }
        
        /* Animation classes */
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Dark mode toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            color: var(--primary);
        }
        
        /* Dark mode styles */
        body.dark-mode {
            background: linear-gradient(135deg, #1e272e 0%, #485460 100%);
            color: #d1d8e0;
        }
        
        body.dark-mode .container {
            background-color: #2f3640;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        body.dark-mode h1 {
            color: #f1f2f6;
        }
        
        body.dark-mode input[type="password"], 
        body.dark-mode input[type="text"] {
            background-color: #353b48;
            border-color: #57606f;
            color: #f1f2f6;
        }
        
        body.dark-mode input[type="password"]:focus, 
        body.dark-mode input[type="text"]:focus {
            background-color: #2f3542;
            border-color: var(--primary);
        }
        
        body.dark-mode .strength-meter {
            background-color: #353b48;
        }
        
        body.dark-mode .ai-section {
            background: linear-gradient(135deg, #2f3542 0%, #353b48 100%);
            border-left-color: var(--primary);
        }
        
        body.dark-mode .requirement {
            color: #a4b0be;
        }
        
        body.dark-mode .requirement.fulfilled {
            color: var(--excellent);
        }
        
        body.dark-mode .btn-secondary {
            background-color: #353b48;
            color: #f1f2f6;
        }
        
        body.dark-mode .btn-secondary:hover {
            background-color: #3d4552;
        }
        
        body.dark-mode .password-history {
            border-top-color: #57606f;
        }
        
        body.dark-mode .history-item {
            border-bottom-color: #57606f;
        }
        
        body.dark-mode .history-item:hover {
            background-color: #353b48;
        }
        
        body.dark-mode .score-item {
            background-color: #353b48;
            color: #f1f2f6;
        }
        
        body.dark-mode .tabs {
            border-bottom-color: #57606f;
        }
        
        body.dark-mode .category-item {
            background-color: #353b48;
            color: #f1f2f6;
        }
        
        body.dark-mode .category-item:hover {
            background-color: #3d4552;
        }
        
        body.dark-mode .breakdown-bar {
            background-color: #353b48;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
        </button>
        
        <h1>QuantumPass AI Analyzer</h1>
        
        <div class="password-container">
            <input type="password" id="passwordInput" placeholder="Enter your password to analyze" autocomplete="off" spellcheck="false">
            <button class="copy-btn" id="copyPassword" title="Copy to clipboard">
                <i class="far fa-copy"></i>
            </button>
            <button class="toggle-password" id="togglePassword" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        
        <div class="password-score">
            <div class="score-item" id="strengthScore">
                <div class="score-value">0</div>
                <div class="score-label">Strength Score</div>
            </div>
            <div class="score-item" id="entropyScore">
                <div class="score-value">0</div>
                <div class="score-label">Entropy Bits</div>
            </div>
            <div class="score-item" id="crackTimeScore">
                <div class="score-value">Instant</div>
                <div class="score-label">Crack Time</div>
            </div>
        </div>
        
        <div class="strength-meter">
            <div class="strength-bar" id="strengthBar"></div>
        </div>
        
        <div class="strength-info">
            <div class="strength-text" id="strengthText">
                <i class="fas fa-shield-alt strength-icon"></i>
                <span>Enter a password</span>
            </div>
            <div class="entropy-score" id="entropyValue">
                <i class="fas fa-key"></i> 0 bits
            </div>
        </div>
        
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" data-tab="requirements">Requirements</div>
                <div class="tab" data-tab="breakdown">Breakdown</div>
                <div class="tab" data-tab="patterns">Patterns</div>
            </div>
            
            <div class="tab-content active" id="requirementsTab">
                <div class="requirements">
                    <div class="requirement" id="lengthReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>At least 12 characters</span>
                    </div>
                    <div class="requirement" id="lowercaseReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>Lowercase letters (a-z)</span>
                    </div>
                    <div class="requirement" id="uppercaseReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>Uppercase letters (A-Z)</span>
                    </div>
                    <div class="requirement" id="numberReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>Numbers (0-9)</span>
                    </div>
                    <div class="requirement" id="specialReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>Special characters (!@#)</span>
                    </div>
                    <div class="requirement" id="uniqueReq">
                        <span class="requirement-icon"><i class="far fa-circle"></i></span>
                        <span>No repeated patterns</span>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="breakdownTab">
                <div class="password-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="lengthValue">0</div>
                        <div class="stat-label">Length</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="lowercaseValue">0</div>
                        <div class="stat-label">Lowercase</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="uppercaseValue">0</div>
                        <div class="stat-label">Uppercase</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="numbersValue">0</div>
                        <div class="stat-label">Numbers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="specialValue">0</div>
                        <div class="stat-label">Special</div>
                    </div>
                </div>
                
                <div class="password-breakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-header">
                            <span>Length</span>
                            <span id="lengthScore">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="lengthBar" style="width: 0%; background-color: var(--primary);"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div class="breakdown-header">
                            <span>Character Variety</span>
                            <span id="varietyScore">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="varietyBar" style="width: 0%; background-color: var(--info);"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div class="breakdown-header">
                            <span>Pattern Avoidance</span>
                            <span id="patternScore">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="patternBar" style="width: 0%; background-color: var(--success);"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="patternsTab">
                <div class="password-categories">
                    <div class="category-item active" data-category="all">All Patterns</div>
                    <div class="category-item" data-category="sequential">Sequential</div>
                    <div class="category-item" data-category="repeated">Repeated</div>
                    <div class="category-item" data-category="dictionary">Dictionary</div>
                    <div class="category-item" data-category="keyboard">Keyboard</div>
                    <div class="category-item" data-category="personal">Personal Info</div>
                </div>
                
                <div id="patternsList" style="margin-top: 20px;">
                    <p style="color: var(--text-light); text-align: center;">No patterns detected yet</p>
                </div>
            </div>
        </div>
        
        <div class="time-to-crack hidden" id="timeToCrack">
            <i class="fas fa-clock"></i> Estimated time to crack: <span id="crackTimeValue">Instantly</span>
        </div>
        
        <div class="auto-correct hidden" id="autoCorrect">
            <div>
                <span><i class="fas fa-lightbulb"></i> AI Suggestion: </span>
                <span class="corrected-password" id="correctedPassword"></span>
            </div>
            <button class="apply-correction" id="applyCorrection">
                <i class="fas fa-magic btn-icon"></i>
                Apply
            </button>
        </div>
        
        <div class="ai-section hidden" id="aiSuggestions">
            <h3><i class="fas fa-robot ai-icon"></i> AI Security Recommendations:</h3>
            <ul id="suggestionsList">
                <!-- Suggestions will be added here by JavaScript -->
            </ul>
        </div>
        
        <div class="password-actions">
            <button class="btn btn-success" id="generatePassword">
                <i class="fas fa-key btn-icon"></i>
                Generate Strong
            </button>
            <button class="btn btn-warning" id="refreshButton">
                <i class="fas fa-sync-alt btn-icon"></i>
                Refresh
            </button>
            <button class="btn btn-primary" id="savePassword">
                <i class="fas fa-save btn-icon"></i>
                Save
            </button>
        </div>
        
        <div class="password-history hidden" id="passwordHistory">
            <div class="history-title">
                <i class="fas fa-history btn-icon"></i>
                Password History
            </div>
            <div id="historyItems"></div>
        </div>
    </div>

    <div class="toast" id="toast">Password copied to clipboard!</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const passwordInput = document.getElementById('passwordInput');
            const togglePassword = document.getElementById('togglePassword');
            const copyPassword = document.getElementById('copyPassword');
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            const strengthIcon = strengthText.querySelector('.strength-icon');
            const timeToCrack = document.getElementById('timeToCrack');
            const crackTimeValue = document.getElementById('crackTimeValue');
            const aiSuggestions = document.getElementById('aiSuggestions');
            const suggestionsList = document.getElementById('suggestionsList');
            const autoCorrect = document.getElementById('autoCorrect');
            const correctedPassword = document.getElementById('correctedPassword');
            const applyCorrection = document.getElementById('applyCorrection');
            const generatePasswordBtn = document.getElementById('generatePassword');
            const refreshButton = document.getElementById('refreshButton');
            const savePasswordBtn = document.getElementById('savePassword');
            const passwordHistory = document.getElementById('passwordHistory');
            const historyItems = document.getElementById('historyItems');
            const toast = document.getElementById('toast');
            const themeToggle = document.getElementById('themeToggle');
            
            // Score elements
            const strengthScore = document.getElementById('strengthScore').querySelector('.score-value');
            const entropyScore = document.getElementById('entropyScore').querySelector('.score-value');
            const crackTimeScore = document.getElementById('crackTimeScore').querySelector('.score-value');
            const entropyValue = document.getElementById('entropyValue');
            
            // Breakdown elements
            const lengthValue = document.getElementById('lengthValue');
            const lowercaseValue = document.getElementById('lowercaseValue');
            const uppercaseValue = document.getElementById('uppercaseValue');
            const numbersValue = document.getElementById('numbersValue');
            const specialValue = document.getElementById('specialValue');
            const lengthScore = document.getElementById('lengthScore');
            const lengthBar = document.getElementById('lengthBar');
            const varietyScore = document.getElementById('varietyScore');
            const varietyBar = document.getElementById('varietyBar');
            const patternScore = document.getElementById('patternScore');
            const patternBar = document.getElementById('patternBar');
            
            // Tab elements
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Pattern category elements
            const categoryItems = document.querySelectorAll('.category-item');
            const patternsList = document.getElementById('patternsList');
            
            // Requirements
            const lengthReq = document.getElementById('lengthReq');
            const lowercaseReq = document.getElementById('lowercaseReq');
            const uppercaseReq = document.getElementById('uppercaseReq');
            const numberReq = document.getElementById('numberReq');
            const specialReq = document.getElementById('specialReq');
            const uniqueReq = document.getElementById('uniqueReq');
            
            // Password history
            let savedPasswords = JSON.parse(localStorage.getItem('passwordHistory')) || [];
            
            // Initialize
            updatePasswordHistory();
            setupEventListeners();
            checkDarkModePreference();
            
            function setupEventListeners() {
                // Toggle password visibility
                togglePassword.addEventListener('click', togglePasswordVisibility);
                
                // Copy password to clipboard
                copyPassword.addEventListener('click', copyToClipboard);
                
                // Analyze password as user types
                passwordInput.addEventListener('input', handlePasswordInput);
                
                // Apply auto-correction
                applyCorrection.addEventListener('click', applyAutoCorrection);
                
                // Generate strong password
                generatePasswordBtn.addEventListener('click', generateAndDisplayStrongPassword);
                
                // Refresh button
                refreshButton.addEventListener('click', resetPasswordAnalyzer);
                
                // Save password for comparison
                savePasswordBtn.addEventListener('click', savePasswordToHistory);
                
                // Tab switching
                tabs.forEach(tab => {
                    tab.addEventListener('click', switchTab);
                });
                
                // Pattern category switching
                categoryItems.forEach(item => {
                    item.addEventListener('click', switchPatternCategory);
                });
                
                // Theme toggle
                themeToggle.addEventListener('click', toggleDarkMode);
            }
            
            function togglePasswordVisibility() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            }
            
            function copyToClipboard() {
                if (passwordInput.value.length === 0) return;
                
                passwordInput.select();
                document.execCommand('copy');
                
                // Show toast notification
                showToast('Password copied to clipboard!');
            }
            
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            function handlePasswordInput() {
                const password = this.value;
                analyzePassword(password);
            }
            
            function applyAutoCorrection() {
                passwordInput.value = correctedPassword.textContent;
                passwordInput.type = 'text';
                togglePassword.innerHTML = '<i class="fas fa-eye-slash"></i>';
                analyzePassword(passwordInput.value);
                showToast('AI suggestion applied!');
            }
            
            function generateAndDisplayStrongPassword() {
                const password = generateStrongPassword();
                passwordInput.value = password;
                passwordInput.type = 'text';
                togglePassword.innerHTML = '<i class="fas fa-eye-slash"></i>';
                analyzePassword(password);
                showToast('Strong password generated!');
            }
            
            function resetPasswordAnalyzer() {
                // Reset password input
                passwordInput.value = '';
                passwordInput.type = 'password';
                togglePassword.innerHTML = '<i class="fas fa-eye"></i>';
                
                // Reset all indicators
                strengthBar.style.width = '0%';
                strengthText.querySelector('span').textContent = 'Enter a password';
                strengthText.style.color = 'var(--text-dark)';
                strengthIcon.className = 'fas fa-shield-alt strength-icon';
                
                // Reset scores
                strengthScore.textContent = '0';
                entropyScore.textContent = '0';
                crackTimeScore.textContent = 'Instant';
                entropyValue.innerHTML = '<i class="fas fa-key"></i> 0 bits';
                
                // Reset breakdown
                lengthValue.textContent = '0';
                lowercaseValue.textContent = '0';
                uppercaseValue.textContent = '0';
                numbersValue.textContent = '0';
                specialValue.textContent = '0';
                
                lengthScore.textContent = '0%';
                lengthBar.style.width = '0%';
                
                varietyScore.textContent = '0%';
                varietyBar.style.width = '0%';
                
                patternScore.textContent = '0%';
                patternBar.style.width = '0%';
                
                // Reset requirements
                resetRequirements();
                
                // Hide AI suggestions and auto-correct
                aiSuggestions.classList.add('hidden');
                autoCorrect.classList.add('hidden');
                
                // Clear time to crack
                timeToCrack.classList.add('hidden');
                
                // Clear patterns list
                patternsList.innerHTML = '<p style="color: var(--text-light); text-align: center;">No patterns detected yet</p>';
                
                // Focus back on input
                passwordInput.focus();
            }
            
            function savePasswordToHistory() {
                const password = passwordInput.value;
                if (password.length === 0) return;
                
                const strength = calculatePasswordStrength(password);
                
                // Add to history (limit to 5)
                savedPasswords.unshift({
                    password: password,
                    strength: strength.score,
                    timestamp: new Date().toISOString()
                });
                
                if (savedPasswords.length > 5) {
                    savedPasswords = savedPasswords.slice(0, 5);
                }
                
                localStorage.setItem('passwordHistory', JSON.stringify(savedPasswords));
                updatePasswordHistory();
                
                // Show notification
                showToast('Password saved to history!');
            }
            
            function updatePasswordHistory() {
                if (savedPasswords.length === 0) {
                    passwordHistory.classList.add('hidden');
                    return;
                }
                
                passwordHistory.classList.remove('hidden');
                historyItems.innerHTML = '';
                
                savedPasswords.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    const passwordSpan = document.createElement('span');
                    passwordSpan.className = 'history-password';
                    passwordSpan.textContent = maskPassword(item.password);
                    
                    const strengthSpan = document.createElement('span');
                    strengthSpan.className = 'history-strength ' + getStrengthClass(item.strength);
                    strengthSpan.textContent = getStrengthLabel(item.strength);
                    
                    historyItem.appendChild(passwordSpan);
                    historyItem.appendChild(strengthSpan);
                    historyItems.appendChild(historyItem);
                    
                    // Add click to fill functionality
                    historyItem.addEventListener('click', function() {
                        passwordInput.value = item.password;
                        passwordInput.type = 'text';
                        togglePassword.innerHTML = '<i class="fas fa-eye-slash"></i>';
                        analyzePassword(item.password);
                    });
                });
            }
            
            function maskPassword(password) {
                if (password.length <= 4) {
                    return password.charAt(0) + '*'.repeat(password.length - 1);
                }
                return password.substring(0, 2) + '*'.repeat(password.length - 4) + password.substring(password.length - 2);
            }
            
            function getStrengthClass(score) {
                if (score < 30) return 'strength-weak';
                if (score < 60) return 'strength-fair';
                if (score < 80) return 'strength-good';
                return 'strength-strong';
            }
            
            function getStrengthLabel(score) {
                if (score < 30) return 'Weak';
                if (score < 60) return 'Fair';
                if (score < 80) return 'Good';
                return 'Strong';
            }
            
            function analyzePassword(password) {
                // Reset requirements
                resetRequirements();
                
                // Calculate password strength
                const strength = calculatePasswordStrength(password);
                
                // Update strength meter and scores
                updateStrengthMeter(strength.score, strength.messages);
                updateScores(strength);
                
                // Update breakdown stats
                updateBreakdownStats(password, strength);
                
                // Update requirements
                updateRequirements(password, strength);
                
                // Calculate and display time to crack
                displayTimeToCrack(password, strength.entropy);
                
                // Update pattern detection
                updatePatternDetection(password, strength.patterns);
                
                // Provide AI suggestions if password is weak
                if (strength.score < 80) {
                    provideAISuggestions(password, strength);
                    aiSuggestions.classList.remove('hidden');
                } else {
                    aiSuggestions.classList.add('hidden');
                }
                
                // Provide auto-correction if possible
                if (strength.score < 70 && strength.autoCorrect) {
                    correctedPassword.textContent = strength.autoCorrect;
                    autoCorrect.classList.remove('hidden');
                } else {
                    autoCorrect.classList.add('hidden');
                }
            }
            
            function resetRequirements() {
                const requirements = [lengthReq, lowercaseReq, uppercaseReq, numberReq, specialReq, uniqueReq];
                requirements.forEach(req => {
                    req.classList.remove('fulfilled');
                    req.querySelector('.requirement-icon').innerHTML = '<i class="far fa-circle"></i>';
                });
            }
            
            function calculatePasswordStrength(password) {
                let score = 0;
                const messages = [];
                let entropy = 0;
                let autoCorrect = null;
                const patterns = {
                    sequential: [],
                    repeated: [],
                    dictionary: [],
                    keyboard: [],
                    personal: []
                };
                
                // Length
                if (password.length === 0) {
                    return { 
                        score: 0, 
                        messages: ['Enter a password to analyze'], 
                        entropy: 0,
                        patterns,
                        autoCorrect: null
                    };
                }
                
                // Length score
                let lengthScore = 0;
                if (password.length < 4) {
                    lengthScore = 5;
                    messages.push('Very short password');
                    autoCorrect = generatePasswordAddition(password, 12 - password.length);
                } else if (password.length < 8) {
                    lengthScore = 15;
                    messages.push('Short password');
                    autoCorrect = generatePasswordAddition(password, 12 - password.length);
                } else if (password.length < 12) {
                    lengthScore = 30;
                    messages.push('Medium length password');
                    autoCorrect = generatePasswordAddition(password, 12 - password.length);
                } else if (password.length < 16) {
                    lengthScore = 50;
                    messages.push('Good length password');
                } else {
                    lengthScore = 70;
                    messages.push('Long password - excellent!');
                }
                score += lengthScore;
                
                // Character variety
                const hasLowercase = /[a-z]/.test(password);
                const hasUppercase = /[A-Z]/.test(password);
                const hasNumbers = /[0-9]/.test(password);
                const hasSpecial = /[^a-zA-Z0-9]/.test(password);
                
                let varietyCount = 0;
                if (hasLowercase) varietyCount++;
                if (hasUppercase) varietyCount++;
                if (hasNumbers) varietyCount++;
                if (hasSpecial) varietyCount++;
                
                // Add points for character variety
                let varietyScore = 0;
                if (varietyCount >= 4) {
                    varietyScore = 30;
                    messages.push('Excellent character variety');
                } else if (varietyCount === 3) {
                    varietyScore = 20;
                    messages.push('Good character variety');
                    autoCorrect = autoCorrect || addMissingCharacterType(password, hasLowercase, hasUppercase, hasNumbers, hasSpecial);
                } else if (varietyCount === 2) {
                    varietyScore = 10;
                    messages.push('Fair character variety');
                    autoCorrect = autoCorrect || addMissingCharacterType(password, hasLowercase, hasUppercase, hasNumbers, hasSpecial);
                } else {
                    messages.push('Poor character variety');
                    autoCorrect = autoCorrect || addMissingCharacterType(password, hasLowercase, hasUppercase, hasNumbers, hasSpecial);
                }
                score += varietyScore;
                
                // Entropy calculation
                let poolSize = 0;
                if (hasLowercase) poolSize += 26;
                if (hasUppercase) poolSize += 26;
                if (hasNumbers) poolSize += 10;
                if (hasSpecial) poolSize += 32; // Approximate common special chars
                
                entropy = Math.log2(Math.pow(poolSize, password.length));
                
                // Common password penalty
                const commonPasswords = ['password', '123456', '12345678', 'qwerty', 'abc123', 'password1', 'admin', 'welcome', 'sunshine', 'letmein'];
                if (commonPasswords.includes(password.toLowerCase())) {
                    score = Math.max(score - 40, 5);
                    messages.push('This is an extremely common password');
                    patterns.dictionary.push({
                        type: 'common',
                        value: password.toLowerCase(),
                        message: 'This is a very common password that is easily guessable'
                    });
                    autoCorrect = generateStrongPassword();
                }
                
                // Sequential characters penalty
                const sequentialRegex = /(?:123|234|345|456|567|678|789|890|abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz|012|123|234|345|456|567|678|789)/i;
                const sequentialMatches = password.match(sequentialRegex);
                if (sequentialMatches) {
                    score = Math.max(score - 20, 0);
                    messages.push('Sequential characters make passwords weaker');
                    sequentialMatches.forEach(match => {
                        patterns.sequential.push({
                            type: 'sequential',
                            value: match,
                            message: `Sequential pattern "${match}" is easy to guess`
                        });
                    });
                    autoCorrect = autoCorrect || fixSequentialChars(password);
                }
                
                // Repeated characters penalty
                const repeatRegex = /(.)\1{2,}/g;
                const repeatMatches = password.match(repeatRegex);
                if (repeatMatches) {
                    score = Math.max(score - 15, 0);
                    messages.push('Repeated characters make passwords weaker');
                    repeatMatches.forEach(match => {
                        patterns.repeated.push({
                            type: 'repeated',
                            value: match,
                            message: `Repeated characters "${match}" reduce password strength`
                        });
                    });
                    autoCorrect = autoCorrect || fixRepeatedChars(password);
                }
                
                // Dictionary words penalty
                const dictionaryWords = ['password', 'letmein', 'welcome', 'sunshine', 'monkey', 'dragon', 'football', 'iloveyou', 'princess', 'master', 'hello'];
                const lowerPassword = password.toLowerCase();
                for (const word of dictionaryWords) {
                    if (lowerPassword.includes(word)) {
                        score = Math.max(score - 25, 0);
                        messages.push('Avoid common dictionary words');
                        patterns.dictionary.push({
                            type: 'dictionary',
                            value: word,
                            message: `Dictionary word "${word}" makes password vulnerable`
                        });
                        autoCorrect = autoCorrect || replaceDictionaryWord(password, word);
                        break;
                    }
                }
                
                // Keyboard patterns penalty
                const keyboardPatterns = ['qwerty', 'asdfgh', 'zxcvbn', '1qaz2wsx', '1q2w3e4r'];
                for (const pattern of keyboardPatterns) {
                    if (lowerPassword.includes(pattern)) {
                        score = Math.max(score - 20, 0);
                        messages.push('Avoid keyboard patterns');
                        patterns.keyboard.push({
                            type: 'keyboard',
                            value: pattern,
                            message: `Keyboard pattern "${pattern}" is easy to guess`
                        });
                        autoCorrect = autoCorrect || replaceKeyboardPattern(password, pattern);
                        break;
                    }
                }
                
                // Unique characters check
                const uniqueChars = new Set(password.split(''));
                if (uniqueChars.size < password.length / 2) {
                    score = Math.max(score - 10, 0);
                    messages.push('Too many repeated characters');
                    patterns.repeated.push({
                        type: 'repeats',
                        value: `Repeats (${password.length - uniqueChars.size} duplicate chars)`,
                        message: 'Too many repeated characters reduces password strength'
                    });
                    autoCorrect = autoCorrect || increaseCharacterVariety(password);
                }
                
                // Personal information check (simplified)
                const personalInfo = ['name', 'user', 'login', 'birthday', 'pet', 'child', 'street'];
                for (const info of personalInfo) {
                    if (lowerPassword.includes(info)) {
                        score = Math.max(score - 15, 0);
                        messages.push('Avoid personal information in passwords');
                        patterns.personal.push({
                            type: 'personal',
                            value: info,
                            message: `Personal information "${info}" makes password guessable`
                        });
                        autoCorrect = autoCorrect || replaceDictionaryWord(password, info);
                        break;
                    }
                }
                
                // Pattern avoidance score (inverse of pattern penalties)
                const patternPenalty = 40 - (100 - score);
                const patternAvoidanceScore = Math.max(0, 100 - patternPenalty);
                
                // Cap score at 100
                score = Math.min(score, 100);
                
                return { 
                    score, 
                    messages, 
                    entropy,
                    patterns,
                    autoCorrect,
                    lengthScore,
                    varietyScore,
                    patternAvoidanceScore,
                    hasLowercase, 
                    hasUppercase, 
                    hasNumbers, 
                    hasSpecial
                };
            }
            
            function updateStrengthMeter(score, messages) {
                // Update bar
                strengthBar.style.width = `${score}%`;
                
                // Update color based on score
                let strengthLabel, strengthColor, strengthIconClass;
                
                if (score < 30) {
                    strengthColor = 'var(--weak)';
                    strengthLabel = 'Very Weak';
                    strengthIconClass = 'fas fa-exclamation-triangle';
                } else if (score < 60) {
                    strengthColor = 'var(--fair)';
                    strengthLabel = 'Fair';
                    strengthIconClass = 'fas fa-exclamation-circle';
                } else if (score < 80) {
                    strengthColor = 'var(--good)';
                    strengthLabel = 'Good';
                    strengthIconClass = 'fas fa-shield-alt';
                } else {
                    strengthColor = 'var(--strong)';
                    strengthLabel = 'Strong';
                    strengthIconClass = 'fas fa-shield-alt';
                }
                
                strengthBar.style.backgroundColor = strengthColor;
                strengthText.querySelector('span').textContent = strengthLabel;
                strengthText.style.color = strengthColor;
                
                // Update icon
                strengthIcon.className = strengthIconClass + ' strength-icon';
                
                // Show first message as tooltip
                strengthText.title = messages.join('\n');
            }
            
            function updateScores(strength) {
                strengthScore.textContent = strength.score;
                entropyScore.textContent = Math.round(strength.entropy);
                entropyValue.innerHTML = `<i class="fas fa-key"></i> ${Math.round(strength.entropy)} bits`;
                
                // Update crack time score
                if (strength.entropy < 28) {
                    crackTimeScore.textContent = 'Instant';
                } else if (strength.entropy < 36) {
                    crackTimeScore.textContent = 'Hours';
                } else if (strength.entropy < 60) {
                    crackTimeScore.textContent = 'Years';
                } else if (strength.entropy < 100) {
                    crackTimeScore.textContent = 'Centuries';
                } else {
                    crackTimeScore.textContent = 'âˆž';
                }
            }
            
            function updateBreakdownStats(password, strength) {
                // Character counts
                const lowercaseCount = (password.match(/[a-z]/g) || []).length;
                const uppercaseCount = (password.match(/[A-Z]/g) || []).length;
                const numbersCount = (password.match(/[0-9]/g) || []).length;
                const specialCount = (password.match(/[^a-zA-Z0-9]/g) || []).length;
                
                lengthValue.textContent = password.length;
                lowercaseValue.textContent = lowercaseCount;
                uppercaseValue.textContent = uppercaseCount;
                numbersValue.textContent = numbersCount;
                specialValue.textContent = specialCount;
                
                // Breakdown scores
                const lengthPercentage = Math.min(100, (strength.lengthScore / 70) * 100);
                const varietyPercentage = Math.min(100, (strength.varietyScore / 30) * 100);
                const patternPercentage = strength.patternAvoidanceScore;
                
                lengthScore.textContent = `${Math.round(lengthPercentage)}%`;
                lengthBar.style.width = `${lengthPercentage}%`;
                
                varietyScore.textContent = `${Math.round(varietyPercentage)}%`;
                varietyBar.style.width = `${varietyPercentage}%`;
                
                patternScore.textContent = `${Math.round(patternPercentage)}%`;
                patternBar.style.width = `${patternPercentage}%`;
            }
            
            function updateRequirements(password, strength) {
                // Length
                if (password.length >= 12) {
                    lengthReq.classList.add('fulfilled');
                    lengthReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
                
                // Lowercase
                if (strength.hasLowercase) {
                    lowercaseReq.classList.add('fulfilled');
                    lowercaseReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
                
                // Uppercase
                if (strength.hasUppercase) {
                    uppercaseReq.classList.add('fulfilled');
                    uppercaseReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
                
                // Numbers
                if (strength.hasNumbers) {
                    numberReq.classList.add('fulfilled');
                    numberReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
                
                // Special characters
                if (strength.hasSpecial) {
                    specialReq.classList.add('fulfilled');
                    specialReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
                
                // Unique characters
                const uniqueChars = new Set(password.split(''));
                if (uniqueChars.size >= password.length * 0.7) { // At least 70% unique chars
                    uniqueReq.classList.add('fulfilled');
                    uniqueReq.querySelector('.requirement-icon').innerHTML = '<i class="fas fa-check-circle"></i>';
                }
            }
            
            function displayTimeToCrack(password, entropy) {
                if (password.length === 0) {
                    timeToCrack.classList.add('hidden');
                    return;
                }
                
                timeToCrack.classList.remove('hidden');
                
                // Very simplified estimation (for demonstration)
                const guessesPerSecond = 1e9; // 1 billion guesses per second (modern GPU)
                const secondsToCrack = Math.pow(2, entropy) / guessesPerSecond;
                
                let timeText;
                
                if (secondsToCrack < 1) {
                    timeText = 'Instantly';
                } else if (secondsToCrack < 60) {
                    timeText = 'Less than a minute';
                } else if (secondsToCrack < 3600) {
                    const minutes = Math.floor(secondsToCrack / 60);
                    timeText = `${minutes} minute${minutes > 1 ? 's' : ''}`;
                } else if (secondsToCrack < 86400) {
                    const hours = Math.floor(secondsToCrack / 3600);
                    timeText = `${hours} hour${hours > 1 ? 's' : ''}`;
                } else if (secondsToCrack < 31536000) {
                    const days = Math.floor(secondsToCrack / 86400);
                    timeText = `${days} day${days > 1 ? 's' : ''}`;
                } else if (secondsToCrack < 3153600000) {
                    const years = Math.floor(secondsToCrack / 31536000);
                    timeText = `${years} year${years > 1 ? 's' : ''}`;
                } else if (secondsToCrack < 31536000000) {
                    timeText = 'Decades';
                } else if (secondsToCrack < 315360000000) {
                    timeText = 'Centuries';
                } else {
                    timeText = 'Millennia';
                }
                
                crackTimeValue.textContent = timeText;
                
                // Update the crack time score
                if (entropy < 28) {
                    crackTimeScore.textContent = 'Instant';
                } else if (entropy < 36) {
                    crackTimeScore.textContent = 'Hours';
                } else if (entropy < 60) {
                    crackTimeScore.textContent = 'Years';
                } else if (entropy < 100) {
                    crackTimeScore.textContent = 'Centuries';
                } else {
                    crackTimeScore.textContent = 'âˆž';
                }
            }
            
            function updatePatternDetection(password, patterns) {
                if (password.length === 0) {
                    patternsList.innerHTML = '<p style="color: var(--text-light); text-align: center;">No patterns detected yet</p>';
                    return;
                }
                
                const allPatterns = [
                    ...patterns.sequential,
                    ...patterns.repeated,
                    ...patterns.dictionary,
                    ...patterns.keyboard,
                    ...patterns.personal
                ];
                
                if (allPatterns.length === 0) {
                    patternsList.innerHTML = '<p style="color: var(--success); text-align: center;"><i class="fas fa-check-circle"></i> No weak patterns detected</p>';
                    return;
                }
                
                patternsList.innerHTML = '';
                
                allPatterns.forEach(pattern => {
                    const patternItem = document.createElement('div');
                    patternItem.style.padding = '10px';
                    patternItem.style.marginBottom = '10px';
                    patternItem.style.borderRadius = '6px';
                    patternItem.style.backgroundColor = 'rgba(255, 71, 87, 0.1)';
                    patternItem.style.borderLeft = '4px solid var(--weak)';
                    
                    const patternType = document.createElement('div');
                    patternType.style.fontWeight = '600';
                    patternType.style.color = 'var(--weak)';
                    patternType.style.marginBottom = '5px';
                    patternType.textContent = pattern.type.charAt(0).toUpperCase() + pattern.type.slice(1) + ' pattern';
                    
                    const patternValue = document.createElement('div');
                    patternValue.style.fontFamily = "'Fira Code', 'Courier New', monospace";
                    patternValue.style.marginBottom = '5px';
                    patternValue.textContent = `"${pattern.value}"`;
                    
                    const patternMessage = document.createElement('div');
                    patternMessage.style.fontSize = '14px';
                    patternMessage.style.color = 'var(--text-medium)';
                    patternMessage.textContent = pattern.message;
                    
                    patternItem.appendChild(patternType);
                    patternItem.appendChild(patternValue);
                    patternItem.appendChild(patternMessage);
                    
                    patternsList.appendChild(patternItem);
                });
            }
            
            function provideAISuggestions(password, strength) {
                suggestionsList.innerHTML = '';
                const suggestions = [];
                
                // Length suggestions
                if (password.length < 12) {
                    suggestions.push(`Increase length to at least 12 characters (currently ${password.length})`);
                }
                
                // Character variety suggestions
                if (!strength.hasLowercase) {
                    suggestions.push('Add lowercase letters (a-z) for better variety');
                }
                
                if (!strength.hasUppercase) {
                    suggestions.push('Add uppercase letters (A-Z) for better variety');
                }
                
                if (!strength.hasNumbers) {
                    suggestions.push('Include numbers (0-9) to increase complexity');
                }
                
                if (!strength.hasSpecial) {
                    suggestions.push('Add special characters (!@#$%^&*) to maximize security');
                }
                
                // Common patterns suggestions
                if (/^\d+$/.test(password)) {
                    suggestions.push('Avoid using only numbers - mix character types');
                }
                
                if (/^[a-zA-Z]+$/.test(password)) {
                    suggestions.push('Avoid using only letters - include numbers and symbols');
                }
                
                if (password === password.toLowerCase()) {
                    suggestions.push('Mix uppercase and lowercase letters for better security');
                }
                
                if (password === password.toUpperCase()) {
                    suggestions.push('Mix uppercase and lowercase letters for better security');
                }
                
                // Common password suggestions
                const commonPasswords = ['password', '123456', '12345678', 'qwerty', 'abc123'];
                if (commonPasswords.includes(password.toLowerCase())) {
                    suggestions.push('This is an extremely common password - choose something more unique');
                }
                
                // Sequential characters
                const sequentialRegex = /(?:123|234|345|456|567|678|789|890|abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz)/i;
                if (sequentialRegex.test(password)) {
                    suggestions.push('Avoid sequential characters (like "123" or "abc") which are easy to guess');
                }
                
                // Repeated characters
                const repeatRegex = /(.)\1{2,}/;
                if (repeatRegex.test(password)) {
                    suggestions.push('Avoid repeated characters (like "aaa" or "111") which reduce security');
                }
                
                // Dictionary words
                const dictionaryWords = ['password', 'letmein', 'welcome', 'sunshine', 'monkey', 'dragon', 'football', 'iloveyou'];
                const lowerPassword = password.toLowerCase();
                for (const word of dictionaryWords) {
                    if (lowerPassword.includes(word)) {
                        suggestions.push('Avoid common dictionary words which are vulnerable to dictionary attacks');
                        break;
                    }
                }
                
                // Keyboard patterns
                const keyboardPatterns = ['qwerty', 'asdfgh', 'zxcvbn', '1qaz2wsx', '1q2w3e4r'];
                for (const pattern of keyboardPatterns) {
                    if (lowerPassword.includes(pattern)) {
                        suggestions.push('Avoid keyboard patterns which are easy to guess');
                        break;
                    }
                }
                
                // Unique characters
                const uniqueChars = new Set(password.split(''));
                if (uniqueChars.size < password.length / 2) {
                    suggestions.push('Use more unique characters - too many repeats reduce security');
                }
                
                // If no specific suggestions, provide general advice
                if (suggestions.length === 0) {
                    suggestions.push('Consider making your password longer for added security');
                    suggestions.push('Try using a passphrase (multiple random words) for better memorability and security');
                }
                
                // Add advanced suggestions
                suggestions.push('Consider using a password manager to generate and store strong, unique passwords');
                suggestions.push('Enable two-factor authentication wherever possible for added security');
                
                // Add suggestions to the list
                suggestions.forEach(suggestion => {
                    const li = document.createElement('li');
                    li.textContent = suggestion;
                    suggestionsList.appendChild(li);
                });
            }
            
            // Password generation and correction functions
            function generateStrongPassword(length = 16) {
                const chars = {
                    lowercase: 'abcdefghijklmnopqrstuvwxyz',
                    uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                    numbers: '0123456789',
                    special: '!@#$%^&*()_+-=[]{}|;:,.<>?'
                };
                
                let allChars = chars.lowercase + chars.uppercase + chars.numbers + chars.special;
                let password = '';
                
                // Ensure at least one character from each set
                password += getRandomChar(chars.lowercase);
                password += getRandomChar(chars.uppercase);
                password += getRandomChar(chars.numbers);
                password += getRandomChar(chars.special);
                
                // Fill the rest randomly
                for (let i = 4; i < length; i++) {
                    password += getRandomChar(allChars);
                }
                
                // Shuffle the password
                return shuffleString(password);
            }
            
            function getRandomChar(charSet) {
                return charSet[Math.floor(Math.random() * charSet.length)];
            }
            
            function shuffleString(str) {
                const array = str.split('');
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array.join('');
            }
            
            function generatePasswordAddition(password, count) {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
                let addition = '';
                
                for (let i = 0; i < count; i++) {
                    addition += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                
                return password + addition;
            }
            
            function addMissingCharacterType(password, hasLower, hasUpper, hasNum, hasSpecial) {
                let additions = '';
                
                if (!hasLower) additions += 'a';
                if (!hasUpper) additions += 'A';
                if (!hasNum) additions += '1';
                if (!hasSpecial) additions += '!';
                
                // Insert at random position
                const pos = Math.floor(Math.random() * password.length);
                return password.slice(0, pos) + additions + password.slice(pos);
            }
            
            function fixSequentialChars(password) {
                // Replace sequential numbers with random numbers
                let fixed = password.replace(/(123|234|345|456|567|678|789|890)/g, match => {
                    return Math.floor(100 + Math.random() * 900).toString().substring(0, match.length);
                });
                
                // Replace sequential letters with random letters
                fixed = fixed.replace(/(abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz)/gi, match => {
                    const start = Math.floor(Math.random() * 23); // 26 letters - 3 length
                    return 'abcdefghijklmnopqrstuvwxyz'.substring(start, start + match.length);
                });
                
                return fixed === password ? null : fixed;
            }
            
            function fixRepeatedChars(password) {
                return password.replace(/(.)\1{2,}/g, match => {
                    // Replace repeats with similar but varied characters
                    const char = match[0];
                    let replacement = char;
                    
                    // Alternate between similar characters
                    const similarChars = {
                        'a': 'aA4@',
                        'b': 'bB68',
                        'c': 'cC(<',
                        'd': 'dD)',
                        'e': 'eE3#',
                        'f': 'fF/',
                        'g': 'gG9',
                        'h': 'hH#',
                        'i': 'iI1!|',
                        'j': 'jJ',
                        'k': 'kK<',
                        'l': 'lL1|',
                        'm': 'mM',
                        'n': 'nN',
                        'o': 'oO0*',
                        'p': 'pP',
                        'q': 'qQ',
                        'r': 'rR',
                        's': 'sS5$',
                        't': 'tT+7',
                        'u': 'uU',
                        'v': 'vV',
                        'w': 'wW',
                        'x': 'xX*',
                        'y': 'yY',
                        'z': 'zZ2',
                        '0': '0oO*',
                        '1': '1iI|',
                        '2': '2zZ',
                        '3': '3eE#',
                        '4': '4aA$',
                        '5': '5sS%',
                        '6': '6bG',
                        '7': '7tT',
                        '8': '8B',
                        '9': '9gG'
                    };
                    
                    if (similarChars[char.toLowerCase()]) {
                        const options = similarChars[char.toLowerCase()];
                        for (let i = 1; i < match.length; i++) {
                            replacement += options[Math.floor(Math.random() * options.length)];
                        }
                        return replacement;
                    }
                    
                    // Default: just add numbers
                    for (let i = 1; i < match.length; i++) {
                        replacement += Math.floor(Math.random() * 10);
                    }
                    return replacement;
                });
            }
            
            function replaceDictionaryWord(password, word) {
                const index = password.toLowerCase().indexOf(word);
                if (index === -1) return null;
                
                const before = password.substring(0, index);
                const after = password.substring(index + word.length);
                const replacement = generateStrongPassword(word.length);
                
                return before + replacement + after;
            }
            
            function replaceKeyboardPattern(password, pattern) {
                const index = password.toLowerCase().indexOf(pattern);
                if (index === -1) return null;
                
                const before = password.substring(0, index);
                const after = password.substring(index + pattern.length);
                const replacement = generateStrongPassword(pattern.length);
                
                return before + replacement + after;
            }
            
            function increaseCharacterVariety(password) {
                // Replace some repeated characters with new ones
                const charCount = {};
                for (const char of password) {
                    charCount[char] = (charCount[char] || 0) + 1;
                }
                
                // Find most repeated characters
                const sortedChars = Object.keys(charCount).sort((a, b) => charCount[b] - charCount[a]);
                
                // Replace some of the most repeated
                let newPassword = password;
                for (let i = 0; i < Math.min(2, sortedChars.length); i++) {
                    const char = sortedChars[i];
                    const regex = new RegExp(char, 'g');
                    const matches = password.match(regex);
                    if (matches && matches.length > 2) {
                        // Replace half of them
                        const replaceCount = Math.floor(matches.length / 2);
                        let replaced = 0;
                        newPassword = newPassword.replace(regex, m => {
                            if (replaced < replaceCount) {
                                replaced++;
                                return getRandomChar('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*');
                            }
                            return m;
                        });
                    }
                }
                
                return newPassword === password ? null : newPassword;
            }
            
            function switchTab(e) {
                // Remove active class from all tabs
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Add active class to clicked tab
                e.target.classList.add('active');
                
                // Hide all tab contents
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show the corresponding tab content
                const tabId = e.target.getAttribute('data-tab') + 'Tab';
                document.getElementById(tabId).classList.add('active');
            }
            
            function switchPatternCategory(e) {
                // Remove active class from all categories
                categoryItems.forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to clicked category
                e.target.classList.add('active');
                
                // Filter patterns based on category
                const category = e.target.getAttribute('data-category');
                // In a real app, you would filter and display patterns here
            }
            
            function checkDarkModePreference() {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.body.classList.add('dark-mode');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
            }
            
            function toggleDarkMode() {
                document.body.classList.toggle('dark-mode');
                
                if (document.body.classList.contains('dark-mode')) {
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    localStorage.setItem('theme', 'dark');
                } else {
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    localStorage.setItem('theme', 'light');
                }
            }
        });
    </script>
</body>
</html>